---
title : B-Tree
date: YYYY-MM-DD HH:MM:SS +09:00
author: 심해산 연어
layout: post
categories: ["Data Structure"]
tags: [자료구조,b-tree]
---

## B-Tree
이진 트리와 다르게 하나의 노드에 더많은 정보를 가지거나, 두 개 이상의 자식을 가질 수 있다.   
최대 M개의 자식을 가질 수 있는 B-Tree를 M차 B-tree라고 한다.

HHD, SSD 같은 외부 기억 장치는 블럭 단위의 입출력을 하고 블럭안의 파일의 크기와는 상관 없이 입출력 비용은 동일하기에
하나의 블럭안에 여러 데이터를 동시 저장하면 블럭을 효울적으로 사용 가능 하여
많은 데이터베이스들이 B-Tree를 애용

B-Tree는 균형 이진 트리의 연속으로 최악의 경우에도 O(logN)의 검색 성능   
([이진 트리](https://hyunhobae.github.io/blog/2024/11/04/%EC%9D%B4%EC%A7%84%ED%8A%B8%EB%A6%AC.html))

### B-Tree의 특징
+ 각 노드의 자료는 정렬 되어 있다.
+ 자료는 중복되지 않는다.
+ 모든 리프 노드는 같은 레벨에 있다.
+ 루트 노드는 자신이 리프 노드가 되지 않는 이상 최소한 2개 이상의 자식을 가진다.
+ 루트 노드와 리프 노드를 제외한 노드들은 최대 M개 구터 최대 M/2개 까지 자식을 가질 수 있다.
+ 최소 차수는 자식 수 의 하한값을 의미 하며 최소 차수를 t라 하면 M = 2t-1을 만족한다.
+ 노드에는 최대 M-1개 부터 M/2-1개의 키가 포함 될 수 있다.
+ 노드의 키가 X개라면 자식의 수는 X+1개 이다.

[//]: # (삽입 삭제 과정)

## B*Tree
B-Tree의 단점 중 하나는 구조를 유지하기 이해 추가적인 연산이 수해되거나 새로운 노드가 생성된다.   
(균형 이진 트리를 유지하기 위해)   
노드의 추가적인 생성과 추가적인 연산의 최소화를 위해서 B-Tree에서 몇 가지 규칙이 추가된 B*Tree가 등장   

B-Tree와 가장 대표적인 차이점은 최소 M/2개의 키값을 가져야 했던 조건이 2M/3으로 늘어났고
노드가 가득 차면 분열 대신 이웃한 형제 노드로 재배치 된다.
(더이상 재배치 할 수 없으면 분열)

### B*Tree 특징
- 각 노드의 자료는 정렬되어 있다.
- 자료는 중복되지 않는다.
- 모든 리프 노드의 값은 같은 래밸에 있다.
- 루트 노드는 자신이 리프 노드가 되지 않는 이상 적어도 2개 이상의 자식을 가진다.
- 루트 노드가 아닌 노드들은 적어도 2((M-2)/3)+1 개의 자식 노드를 가지고 있다. (최대 M개)


## B+Tree
B-Tree는 탐색을 위해 노드를 찾아 이동해야 한다는 단점이 있다.
이런한 단점을 해소하고자 B+Tree는 같은 레벨의 모든 키값들이 정렬되어 있고 같은 레벨의 Sibiling node는 연결리스트 형태로 이어져 있다.   
(Sibiling node : )   
(같은 레벨의 Sibiling node는 모두 연결되어 있어서 키값이 않는다.)

리프 노드는 데이터 노드 나머지는 인덱스 노드   
인덱스 노드의 Value 값에는 다음 노드를 가리키는 포인터 주소가 존재
데이터 노드의 Value에는 데이터 존재

데이터는 리프 노드에 존재하므로 반드시 리프 노드까지 내려가야 한다.   

데이터베이스에서 가장 중요시 여기는 것이 검색 속도이기 때문에 대부분의 데이터베이스에서 B+Tree구조를 사용한다.
### B+Tree의 특징
- 데이터 노드의 자료는 정렬되어 있다.
- 데이터 노드의 데이터는 중복되지 않는다.
- 모든 리프 노드는 같은 래밸에 있다.
- 리프 노드가 아닌 노드의 키 값의 수는 그 노드의 서브 트리 수 보다 하나가 적다.
- 모든 리프 노드는 연결리스트로 연결되어 있다.
- 탐색에 유리하다.


## 참조
- [https://ssocoit.tistory.com/217](https://ssocoit.tistory.com/217)
- [https://velog.io/@emplam27/%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0-%EA%B7%B8%EB%A6%BC%EC%9C%BC%EB%A1%9C-%EC%95%8C%EC%95%84%EB%B3%B4%EB%8A%94-B-Tree](https://velog.io/@emplam27/%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0-%EA%B7%B8%EB%A6%BC%EC%9C%BC%EB%A1%9C-%EC%95%8C%EC%95%84%EB%B3%B4%EB%8A%94-B-Tree)
- [b-tree 그래픽](https://www.cs.usfca.edu/~galles/visualization/BTree.html)
- [b+tree 그래픽](https://www.cs.usfca.edu/~galles/visualization/BPlusTree.html)
